# uploads/.htaccess - Düzeltilmiş
RewriteEngine On

# Directory listelemeyi engelle
Options -Indexes

# Tüm HTTP metodlarına izin ver - kısıtlamayı kaldır
<Files *>
    Order allow,deny
    Allow from all
</Files>

# CORS başlıklarını etkinleştir
Header always set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS"
Header always set Access-Control-Allow-Headers "Content-Type, Authorization"

# Preflight istekleri için
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]

# PDF dosyalarına özel güvenlik - ama POST'u engellemeyecek şekilde
<FilesMatch "\.pdf$">
    # Güvenlik başlıkları
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    
    # Önbellekleme kontrolü
    Header always set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header always set Pragma "no-cache"
    Header always set Expires "0"
    
    # Erişim izinleri - kısıtlamayı gevşet
    Order allow,deny
    Allow from all
</FilesMatch>

# PHP dosyalarına tam erişim
<FilesMatch "\.php$">
    Order allow,deny
    Allow from all
</FilesMatch>
